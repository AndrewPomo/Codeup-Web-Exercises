<!DOCTYPE html>
<html>
<head>
	<title>Weather Map</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
	<style type="text/css">
		#map-canvas {
            height: 380px;
        }

        .dayHolder	{
        
        	background-color: lightgrey;
        	border-bottom: 1px solid grey;
        	border-left: 1px solid grey;
        	border-right: 1px solid grey;
        }

        #instructions {
        	background-color: lightgrey;
        	margin-bottom: 0px;
        	border-top: 1px solid grey;
        	border-left: 1px solid grey;
        	border-right: 1px solid grey;
        	font-weight:bold;
        	font-size:18px;
        	padding-bottom:20px;
        }

        #mainHeader {
        	font-size:23px;
        }

        .tempHolder {
        	padding-bottom: 0px;
        }

        #coordinateInputs {
        	margin-bottom: 10px;
        }

	</style>
</head>
<body>
	<div class="header container">
		<h1 id="mainHeader">How's the weather?</h1>
	</div>
	

	<!-- Map Holder -->
    <div class="container mapHolder">
    	<div class="col-xs-12" id="map-canvas"></div>
	</div>

	<div class="header container">

	</div>

	<!-- Weather Holder -->
	<div class="container" id="cityNameHolder">
		<p id="instructions" class="col-xs-12 text-center">Drag the pin to a city to get a 3-Day Forecast!</p>
	</div>
	<div class="container" id="forecastHolder">
		
	</div>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyARqkh-TCsnLSJyU72z5IxXWDKhAKAaaIo"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

    <!-- Script to show address on map -->
    <script type="text/javascript">
    (function() {
        "use strict";


        $(document).ready(function() {

        	
	        // Set our map options
	        var mapOptions = {
	            // Set the zoom level
	            center: {lat: 37.0902, lng: -95.7129},
	            zoom: 4,
	        }

	        // Render the map
	        var map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);

	        // Add a marker
	        var defaultPos = {lat: 37.0902, lng: -95.7129};
	        var marker = new google.maps.Marker({
		    	position: defaultPos,
		    	map: map,
		    	draggable: true,
		    	title: 'Pick your place!'
		  	});
	

	        //Get Lat/Long from dropped pin.
		  	google.maps.event.addListener(marker, 'dragend', function(event){

			    var latitude = event.latLng.lat().toFixed(3);
			    var longitude = event.latLng.lng().toFixed(3);
				map.setCenter(marker.position);
				marker.setMap(map);
				map.setZoom(6);
			//Get forecast from dropped pin.
			
				$.get("http://api.openweathermap.org/data/2.5/forecast/daily", {
		    		APPID: "fba2f94408480f3524293a3e6354afa5",
		    		lat: latitude,
		    		lon: longitude,
		    		units: "imperial",
		    		cnt: "3"
				}).done(function(data) {
				    console.log(data);
				    var day = data.list;
		            var forecastData = "";
		            var cityName = data.city.name;
		            $('#instructions').html("Here's the forecast for " + cityName + '!');
				    day.forEach(function(day,index){
				    	var date = new Date(day.dt*1000);
				    	console.log(date);
				    	var month = date.getMonth();
				    	var specDate = date.getDate();
				    	var dayName = date.getDay();
				    	console.log(dayName)
				    	
		            	forecastData += '<div class="dayHolder col-xs-4 container"><div class="dateHolder container col-xs-12"><p class="day text-center"><strong>'
		            	if (index == 0) {
				    		forecastData += 'Today - '
				    	} else if (index == 1) {
				    		forecastData += 'Tomorrow - '
				    	} else if (index == 2) {
				    		if (dayName == 0) {
				    			forecastData += 'Monday - '
				    		} else if (dayName == 1) {
				    			forecastData += 'Tuesday - '
				    		} else if (dayName == 2) {
				    			forecastData += 'Wednesday - '
				    		} else if (dayName == 3) {
				    			forecastData += 'Thursday - '
				    		} else if (dayName == 4) {
				    			forecastData += 'Friday - '
				    		} else if (dayName == 5) {
				    			forecastData += 'Saturday - '
				    		} else if (dayName == 6) {
				    			forecastData += 'Sunday - '
				    		}
				    	}
		            	
		            	if (month == 0) {
							forecastData += 'Jan.'
						} else if (month == 1) {
							forecastData += 'Feb.'
						} else if (month == 2) {
							forecastData += 'Mar.'
						} else if (month == 3) {
							forecastData += 'Apr.'
						} else if (month == 4) {
							forecastData += 'May.'
						} else if (month == 5) {
							forecastData += 'Jun.'
						} else if (month == 6) {
							forecastData += 'Jul.'
						} else if (month == 7) {
							forecastData += 'Aug.'
						} else if (month == 8) {
							forecastData += 'Sep.'
						} else if (month == 9) {
							forecastData += 'Oct.'
						} else if (month == 10) {
							forecastData += 'Nov.'
						} else if (month == 11) {
							forecastData += 'Dec.'
						}
		            	forecastData += ' ' + parseInt(specDate) + '</strong></p></div>'
		            	forecastData += '<div class="tempHolder container col-xs-12"><p class="tempInfo text-center"><strong>' + parseInt(day.temp.max) + '째/' + parseInt(day.temp.min) + '째</strong></p></div>'
		            	forecastData += '<div class="weathImageHolder container col-xs-12"><img class="center-block id="weatherIcon" src="http://openweathermap.org/img/w/' + day.weather[0].icon + '.png">' + '</div>'
		            	forecastData += '<div class="cloudHolder container col-xs-12"><p class="cloudInfo text-center"><strong>Cloudiness:</strong> ' + day.clouds +'%</p></div>'
		            	forecastData += '<div class="humidHolder container col-xs-12"><p class="humidityInfo text-center"><strong>Humidity:</strong> ' + day.humidity + '%</p></div>'
		            	forecastData += '<div class="windHolder container col-xs-12"><p class="windInfo text-center"><strong>Wind Speed:</strong> ' + day.speed + 'mph</p></div>'
		            	forecastData += '<div class="pressureHolder container col-xs-12"><p class="pressureInfo text-center"><strong>Pressure:</strong> ' + day.pressure + 'hPa</p></div>'
		            	forecastData += '</div>'
	            	});
	                $("#forecastHolder").html(forecastData);
				});
			});

        	// Weather API Call

        		var latitude = "28.4241";
        		var longitude ="-98.4936";
    //     		var date = new Date(unix_timestamp*1000);
    //     		console.log(date)
				// // Hours part from the timestamp
				// var hours = date.getHours();
				// // Minutes part from the timestamp
				// var minutes = "0" + date.getMinutes();
				// // Seconds part from the timestamp
				// var seconds = "0" + date.getSeconds();

				// // Will display time in 10:30:23 format
				// var formattedTime = hours + ':' + minutes.substr(-2) + ':' + seconds.substr(-2);
  
		        $.get("http://api.openweathermap.org/data/2.5/forecast/daily", {
		    		APPID: "fba2f94408480f3524293a3e6354afa5",
		    		lat: latitude,
		    		lon: longitude,
		    		units: "imperial",
		    		cnt: "3"
				}).done(function(data) {
				    console.log(data);
				    var day = data.list;
		            var forecastData = "";
				    day.forEach(function(day,index){
				    	var date = new Date(day.dt*1000);
				    	console.log(date);
				    	var month = date.getMonth();
				    	var specDate = date.getDate();
				    	var dayName = date.getDay();
				    	console.log(dayName)
				    	
		            	forecastData += '<div class="dayHolder col-xs-4 container"><div class="dateHolder container col-xs-12"><p class="day text-center"><strong>'
		            	if (index == 0) {
				    		forecastData += 'Today - '
				    	} else if (index == 1) {
				    		forecastData += 'Tomorrow - '
				    	} else if (index == 2) {
				    		if (dayName == 0) {
				    			forecastData += 'Monday - '
				    		} else if (dayName == 1) {
				    			forecastData += 'Tuesday - '
				    		} else if (dayName == 2) {
				    			forecastData += 'Wednesday - '
				    		} else if (dayName == 3) {
				    			forecastData += 'Thursday - '
				    		} else if (dayName == 4) {
				    			forecastData += 'Friday - '
				    		} else if (dayName == 5) {
				    			forecastData += 'Saturday - '
				    		} else if (dayName == 6) {
				    			forecastData += 'Sunday - '
				    		}
				    	}
		            	
		            	if (month == 0) {
							forecastData += 'Jan.'
						} else if (month == 1) {
							forecastData += 'Feb.'
						} else if (month == 2) {
							forecastData += 'Mar.'
						} else if (month == 3) {
							forecastData += 'Apr.'
						} else if (month == 4) {
							forecastData += 'May.'
						} else if (month == 5) {
							forecastData += 'Jun.'
						} else if (month == 6) {
							forecastData += 'Jul.'
						} else if (month == 7) {
							forecastData += 'Aug.'
						} else if (month == 8) {
							forecastData += 'Sep.'
						} else if (month == 9) {
							forecastData += 'Oct.'
						} else if (month == 10) {
							forecastData += 'Nov.'
						} else if (month == 11) {
							forecastData += 'Dec.'
						}
		            	forecastData += ' ' + parseInt(specDate) + '</strong></p></div>'
		            	forecastData += '<div class="tempHolder container col-xs-12"><p class="tempInfo text-center"><strong>' + parseInt(day.temp.max) + '째/' + parseInt(day.temp.min) + '째</strong></p></div>'
		            	forecastData += '<div class="weathImageHolder container col-xs-12"><img class="center-block id="weatherIcon" src="http://openweathermap.org/img/w/' + day.weather[0].icon + '.png">' + '</div>'
		            	forecastData += '<div class="cloudHolder container col-xs-12"><p class="cloudInfo text-center"><strong>Cloudiness:</strong> ' + day.clouds +'%</p></div>'
		            	forecastData += '<div class="humidHolder container col-xs-12"><p class="humidityInfo text-center"><strong>Humidity:</strong> ' + day.humidity + '%</p></div>'
		            	forecastData += '<div class="windHolder container col-xs-12"><p class="windInfo text-center"><strong>Wind Speed:</strong> ' + day.speed + 'mph</p></div>'
		            	forecastData += '<div class="pressureHolder container col-xs-12"><p class="pressureInfo text-center"><strong>Pressure:</strong> ' + day.pressure + 'hPa</p></div>'
		            	forecastData += '</div>'
	            	});
	                $("#forecastHolder").html(forecastData);
				});
        });
    })();
    </script>
</body>
</html>